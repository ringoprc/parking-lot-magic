/* frontend/src/App.css */
html, body, #root {
  width: 100%;
  height: 100%;
  margin: 0;
}

html {
  -webkit-text-size-adjust: 100%;
}

@media (prefers-color-scheme: light) {
  :root {
    color: #000000;
    margin-top: 0px;
    background-color: #ffffff;
  }
}

button {
  outline: none !important;
}

div .gm-style-iw {
  min-width: 350px !important;
}

.app-root {
  width: 100%;
  /*min-height: 100vh;*/
  height: 100%;
  display: flex;
  flex-direction: column;
  /*padding-bottom: env(safe-area-inset-bottom);*/
  box-sizing: border-box;
  overflow: hidden; /* prevents the "extra bottom scroll" */
}

@supports (height: 100dvh) {
  .app-root { min-height: 100dvh; }
  .mobile-lots-overlay.open { max-height: calc(100dvh - (56px + 48px)); }
  .mobile-lots-overlay-scroll { height: calc(100dvh - (57px + 49px + 100px)); }
}

.title-bar {
  height: 56px;
  display: flex;
  align-items: center;
  padding: 0 4px;
  border-bottom: 1px solid #e6e6e6;
  background: #fff;
  flex: 0 0 auto;
}

.title-bar-inner {
  display: flex;
  flex-direction: row;
  align-items: center;
  gap: 0.3rem;
  padding: 0px 10px;
}

.title-bar-left {
  display: flex;
  flex-direction: row;
  gap: 0.3rem;
  align-items: center;
}

.title-bar-logo-img {
  width: 46px;
  height: 46px;
}

.title {
  font-size: 20px;
  font-weight: 700;
  color: black;
}

.content {
  width: 100%;
  flex: 1 1 auto;
  display: flex;
  min-height: 0;
  min-width: 0;
  position: absolute;
  height: calc(100% - 56px);
  border-top: 1px solid #ddd;
  bottom: 0px;
}

@media (max-width: 900px) {
  .content {
    width: 100%;
    flex: 1 1 auto;
    display: flex;
    min-height: 0;
    min-width: 0;
    position: absolute;
    height: calc(100% - 113px);
    border-top: none;
    bottom: 0px;
  }
}

.side {
  width: 360px;
  flex: 0 0 auto;
  border-right: 1px solid #e6e6e6;
  overflow: auto;
  padding: 10px;
  background: #fff;
}

@media (max-width: 900px) {
  /* Hide desktop sidebar list on mobile */
  .side {
    display: none;
  }
}

.side-title {
  font-weight: 700;
  margin: 6px 6px 10px;
}

.lot-btn-list-outer {
  height: calc(70vh - 110px); /* overlay height minus search/header padding */
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  overscroll-behavior: contain;
  border-top: 1px solid #eee;
  border-bottom: 1px solid #eee;
  scrollbar-width: thin;
}

@supports (height: 100dvh) {
  .lot-btn-list-outer {
    height: calc(70dvh - 110px);
  }
}

.lot-btn-list {
  padding: 8px 6px 8px 6px;
}

.lot-btn {
  width: 100%;
  text-align: left;
  border: 1px solid #949494;
  background: #fff;
  padding: 12px 16px 12px 20px;
  border-radius: 12px;
  margin-bottom: 8px;
  cursor: pointer;
}

.lot-btn.active {
  border-color: #222;
}

.lot-btn-name-div {
  display: flex;
  justify-content: space-between;
  gap: 0px;
  margin-bottom: 8px;
  flex-direction: column;
  border-bottom: 1px solid #eee;
  padding-bottom: 8px;
}

.lot-btn-name {
  max-width: 100%;
  font-weight: 700;
  margin-bottom: 6px;
  font-size: 14.5px;
}

.lot-btn-sub {
  display: flex;
  justify-content: space-between;
  padding: 0px 0px 0px 0px;
  font-size: 12px;
  flex-direction: column;
  gap: 4px;
  margin-top: 4px;
}

.lot-btn-sub-vacancy-count {
  font-size: 13.5px;
  white-space: nowrap;
  display: flex;
  align-items: center;
}

.lot-btn-sub-address {
  font-size: 12px;
  color: #656565;
}

.lot-btn-sub-time-ago {
  font-size: 9px;
  color: #999;
}

.map-wrap {
  position: relative;
  flex: 1 1 auto;
  min-width: 0;
  min-height: 0;
  height: 100%;
}

/* Ensure the Map component's internal div can stretch */
.map-wrap > div {
  width: 100%;
  height: 100%;
}

.map-wrap .gm-style-mtc-bbw {
  gap: 6px !important;
}

.map-wrap .gm-style-mtc button {
  display: none !important;
  border-radius: 10px !important;
}

.map-wrap .gm-style-iw-c {
  -webkit-transform: translate3d(-50%, -120%, 0);
  transform: translate3d(-50%, -120%, 0);
  max-height: 277px !important;
  min-height: 277px !important;
  padding: 1px 20px 25px 20px !important;
}

.map-wrap .gm-style-iw-tc {
  -webkit-transform: translate3d(-50%, -400%, 0);
  transform: translate3d(-50%, -310%, 0);
  top: -18px;
}

.map-wrap .gm-style-iw-d {
  padding: 0 !important;
  overflow: visible !important;
  /* background: red; */
  max-height: none !important; /* 讓內容自然長 */
}

.map-wrap .gm-ui-hover-effect {
  background-color: black;
}

.map-wrap .gm-ui-hover-effect>span {
  background-color: black;
}

.map-locate-btn {
  position: absolute;
  opacity: 0;
  right: 10px;
  bottom: 146px;
  height: 42px;
  width: 42px;
  border-radius: 999px;
  display: flex;
  font-size: 22px;
  line-height: 1;
  z-index: 1000;
  padding: 10px;
  align-items: center;
  justify-content: center;
  border: none;
  box-shadow: rgba(0, 0, 0, 0.3) 0px 1px 4px -1px;
  background: none 6px center / 28px no-repeat rgb(255, 255, 255);
  
  /* color changes immediately (no delay) */
  transition-property: color, opacity;
  transition-duration: 0.2s, 0s;
  transition-timing-function: ease, ease-in;
  transition-delay: 0s, 0.8s; /* ✅ color delay 0, opacity delay 1s */

  padding: 0.1px 0px 0px 0.1px;
  color: #666666;
  z-index: 990;
  pointer-events: none;
}

.map-locate-btn.ready {
  opacity: 1;
  pointer-events: auto;
}

.map-locate-btn:hover {
  color: #2196f3;
  border: none;
}

.map-locate-btn.active {
  color: #2196f3;
}

.map-locate-spinner {
  border-width: 1.5px !important;
}

/* Allow map drag gestures to pass through the InfoWindow on iOS */
.gm-style .gm-style-iw,
.gm-style .gm-style-iw-c,
.gm-style .gm-style-iw-t,
.gm-style .gm-style-iw-d {
  pointer-events: none !important;
}

/* ===== InfoWindow placeholder image ===== */
.iw-hero-outer {
  display: flex;
  justify-content: center;
  height: 80px;
}

.iw-hero {
  width: calc(95% - 2px);
  height: 80px;
  overflow: hidden;
  border-radius: 10px;
  margin-bottom: 10px;
  background: #eef2f7;
  border: 1px solid #ccc;
}

.iw-hero-img {
  width: 100%;
  height: 100%;
  object-fit: cover;      /* crop nicely */
  display: block;
}


/* ===== Mobile expandable lots bar + full-screen overlay ===== */

.mobile-lots-bar {
  display: none; /* desktop hidden */
  font-weight: 700;
  font-size: 16px;
}

@media (max-width: 900px) {
  .mobile-lots-bar {
    display: flex;
    align-items: center;
    gap: 10px;
    justify-content: space-between;
    height: 56px;
    padding: 0px 12px 0px 20px;
    cursor: pointer;
    background: #fff;
  }
}

.mobile-lots-label {
  color: black;
}

.mobile-lots-toggle {
  border: 0;
  background: transparent;
  padding: 6px;
  border-radius: 8px;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}
.mobile-lots-toggle:active {
  transform: scale(0.98);
}

/* Overlay base (hidden by default; enabled on mobile) */
.mobile-lots-overlay {
  display: none; /* desktop hidden */
}

@supports (height: 100dvh) {
  .mobile-lots-overlay.open {
    max-height: 70dvh;
  }
}

@media (max-width: 900px) {
  .mobile-lots-overlay {
    display: block;
    padding: 0px 15px;
    position: relative;
    left: 0;
    right: 0;
    z-index: 999;
    pointer-events: none;
    opacity: 1;
    background: rgba(0, 0, 0, 0);
    max-height: 0px;
    overflow: hidden;
    transition: max-height 160ms ease, background 160ms ease;
    border-bottom: 1px solid #e6e6e6;
  }

  .mobile-lots-overlay.open {
    pointer-events: auto;

    border-top: 1px solid #eee;
    max-height: 70vh;

    border-bottom-right-radius: 16px;
    border-bottom-left-radius: 16px;
    padding: 0px 15px 12px 15px;

    background: rgba(255, 255, 255, 0.95); /* your dark overlay vibe */
    backdrop-filter: none; /* harmless even if unsupported */
  }

  .mobile-lots-overlay-scroll {
    height: 100%;
    overflow: hidden; /* keep wrapper stable */
  }

  .title-bar-devmeta {
    font-size: 12px;
    margin-top: 6px;
    margin-left: 6px;
  }
}

.mobile-lots-overlay-list {
  max-width: 720px;
  height: 100%;
  margin: 0 auto;
}


/* =========================
   Lot search (input + dropdown)
   ========================= */

.lot-search {
  position: relative; /* for absolute dropdown */
  margin: 10px 0 12px;
}

.lot-search gmp-place-autocomplete {
  border-radius: 999px !important;
  outline: none !important;
}

.lot-search.is-focused gmp-place-autocomplete {
  /*border-color: #2196F3 !important;*/
  border: 1px solid transparent;
}

.lot-search-input-wrap {
  position: relative;
}

/* input */
.lot-search-input {
  width: 100%;
  height: 34px;
  margin-top: 0px;
  box-sizing: border-box;
  padding: 27px 27px;
  padding-right: 42px;
  border-radius: 999px;
  border: 1px solid #949494;
  outline: none;
  line-height: 1;
  background: #fff;

  font-size: 16px;
  font-weight: 800;
  color: #111;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* optional: make focus slightly stronger */
.lot-search.is-focused .lot-search-input,
.lot-search:focus-within .lot-search-input {
  border-color: #1a73e8;
}

.lot-search .lot-search-input.has-items,
.lot-search .lot-search-input.has-items {
  border-color: #1a73e8;
  border-radius: 12px;
  border-bottom-right-radius: 0px;
  border-bottom-left-radius: 0px;
  border-bottom: 1px solid #ccc;
}

.lot-search-clear {
  position: absolute;
  right: 16px;
  top: 50%;
  transform: translateY(-50%);
  display: flex;
  align-items: center;
  justify-content: center;
  width: 28px;
  height: 28px;
  border-radius: 999px;
  border: 1px solid #e6e6e6;
  background: #fff;
  cursor: pointer;
  font-size: 18px;
  line-height: 26px;
  text-align: center;
  padding: 0;
  color: #e6e6e6;
  transition: border 0.3s ease, color 0.3s ease;
}

.lot-search-clear:hover {
  background: #f5f5f5;
  color: black;
  border: 1px solid #000000;
}


/* dropdown container */
.lot-search-dd {
  position: absolute;
  left: 0;
  right: 0;
  top: calc(100% - 1px);
  z-index: 2000;
  background: #ffffff;
  border-radius: 10px;
  padding: 10px;
  box-shadow: 0 12px 24px rgba(0, 0, 0, 0.10);
  max-height: 220px;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: 8px;
  border: 1px solid #a0a0a0;
  border-top-right-radius: 0px;
  border-top-left-radius: 0px;
  border-top: 1px solid #afaeae;
  border-width: thin;
}

@media (max-width: 900px) {
  /* dropdown inside overlay should still be above overlay list */
  .mobile-lots-overlay .lot-search-dd {
    z-index: 2001;
  }
}

.lot-search-dd::-webkit-scrollbar {
  width: 4px;
}
.lot-search-dd::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 1);
  border-radius: 10px;
  border: 3px solid #999;
}

/* dropdown item button */
.lot-search-dd-item {
  width: 100%;
  border: 0;
  background: transparent;
  padding: 8px 18px;
  border-radius: 999px;
  text-align: left;
  cursor: pointer;
  font-size: 16px;
  line-height: 1.25;
  font-weight: 600;
  color: #111;
  -webkit-tap-highlight-color: transparent;
}

.lot-search-dd-item:hover {
  background: rgba(255, 255, 255, 0.85);
}

.lot-search-dd-item.active,
.lot-search-dd-item:active {
  background: rgba(0, 0, 0, 0.06);
}

/* two-line layout inside each suggestion button */
.lot-search-dd-lines {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

/* line 1: name */
.lot-search-dd-title {
  font-size: 16px;
  font-weight: 800;
  line-height: 1.15;
  color: #111;

  /* prevent super long names from exploding layout */
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* line 2: address */
.lot-search-dd-sub {
  font-size: 12px;
  font-weight: 650;
  line-height: 1.2;
  color: #727272;
  white-space: normal;
  word-break: break-word;
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 2;
  overflow: hidden;
}

/* custom marker pin */
.vl-pin{
  width: 28px;
  height: 28px;
  border-radius: 999px;
  border: 3px solid;
  box-shadow: 0 10px 18px rgba(0,0,0,.18);
  position: relative;
  transform: translateY(-6px); /* 視覺上更像 pin */
}

/* IMPORTANT: give the pin’s colored circle its own layer above pulse */
.vl-pin::before{
  content: "";
  position: absolute;
  inset: 0;
  border-radius: 999px;
  background: var(--pin-bg);
  z-index: 1;
}

/*
.vl-pin::after{
  content: "";
  position: absolute;
  left: 50%;
  top: 100%;
  transform: translateX(-50%);
  width: 0;
  height: 0;
  border-left: 7px solid transparent;
  border-right: 7px solid transparent;
  border-top: 10px solid currentColor;
  filter: drop-shadow(0 6px 10px rgba(0,0,0,.12));
}
*/

.vl-pin--num{
  width: 30px;
  height: 30px;
  transform: translate(-50%, -50%);
}

.vl-pin-num{
  position: relative;
  z-index: 2;
  width: 100%;
  height: 100%;
  display: grid;
  place-items: center;
  font-weight: 900;
  font-size: 13px;
  line-height: 1;
}

/* inner dot (optional) */
.vl-pin-dot{
  position: absolute;
  inset: 0;
  border-radius: 999px;
  background: #ffdd87;         /* Google blue */
  border: 3px solid #ffffff;   /* white ring */
  box-shadow: 0 6px 16px rgba(0,0,0,0.25);
}

.search-pin {
  position: relative;
  width: 38px;
  height: 38px;
  transform: translate(-50%, -50%);
}

.search-pin-label {
  position: relative;
  width: 100%;
  height: 100%;
  display: grid;
  place-items: center;
  font-weight: 900;
  font-size: 13px;
  line-height: 1;
}

.search-pin-dot {
  position: absolute;
  inset: 0;
  border-radius: 999px;
  background: #ffdd87;         /* Google blue */
  border: 3px solid #ffffff;   /* white ring */
  box-shadow: 0 6px 16px rgba(0,0,0,0.25);
}

.search-pin-pulse {
  position: absolute;
  inset: -10px;
  border-radius: 999px;
  background: rgb(251 188 0);
  animation: searchPinPulse 1.2s ease-out infinite;
}

.vl-pin-pulse {
  position: absolute;
  z-index: 0;
  inset: -14px;
  border-radius: 999px;
  background: rgb(26 115 232 / 63%);
  animation: vlPinPulse 1.2s ease-out infinite;
}

.lot-pin-pulse-wrap{
  position: relative;
  width: 38px;
  height: 38px;
  transform: translate(-50%, -50%);
}

.lot-pin-pulse-once{
  /* reuse the same look, but run it a few times then stop */
  animation-iteration-count: 999;
  animation-duration: 0.9s; /* slightly snappier for “selected” feel */
  pointer-events: none;
}

@keyframes searchPinPulse {
  0%   { transform: scale(0.55); opacity: 0.85; }
  100% { transform: scale(1.35); opacity: 0; }
}

@keyframes vlPinPulse {
  0%   { transform: scale(0.55); opacity: 0.85; }
  100% { transform: scale(1.35); opacity: 0; }
}



